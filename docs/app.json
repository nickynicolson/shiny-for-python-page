[{"name": "app.py", "content": "from shiny import ui, render, App\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport pyodide.http\napp_ui = ui.page_fluid(\n    ui.layout_sidebar(\n        ui.panel_sidebar(\n            ui.h2(\"Page Charts\"),\n            ui.hr(),\n            ui.input_slider(id=\"slider\", label=\"Number of bins:\", min=5, max=25, value=15)\n        ),\n        ui.panel_main(\n            ui.output_plot(id=\"histogram\")\n        )\n    )\n)\n\ndef server(input, output, session):\n    @output\n    @render.plot\n    async def histogram():\n        url = 'https://api.gbif.org/v1/dataset/cd6e21c8-9e8a-493a-8a76-fbf7862069e5'\n        response = await pyodide.http.pyfetch(url)\n        if response.status != 200:\n            raise Exception(f\"Error fetching {url()}: {response.status}\")\n        data = await response.json()        \n        title = data['title']\n        x = 100 + np.random.randn(500)\n        fig, ax = plt.subplots()\n        ax.hist(x=x, bins=input.slider(), color=\"grey\", ec=\"black\")\n        ax.set_title('Dataset: ' + title)\n        return fig\n\napp = App(ui=app_ui, server=server)\n", "type": "text"}]